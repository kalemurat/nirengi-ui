<div class="properties-panel">
  <!-- Header -->
  <div class="properties-panel__header">
    <h3 class="properties-panel__title">Properties</h3>
    <button class="properties-panel__reset" (click)="resetProperties()" type="button">Reset</button>
  </div>

  <!-- Properties List -->
  <div class="properties-panel__list">
    @if (visibleProperties().length === 0) {
      <div class="properties-panel__empty">No properties available</div>
    } @else {
      @for (prop of visibleProperties(); track prop.name) {
        <div class="properties-panel__property">
          <label class="properties-panel__label">
            {{ prop.label }}
            @if (prop.readOnly) {
              <span class="properties-panel__badge">(Read-only)</span>
            }
            @if (prop.description) {
              <span class="properties-panel__hint">{{ prop.description }}</span>
            }
          </label>

          @switch (prop.type) {
            @case ('string') {
              <nui-textbox
                [ngModel]="getPropertyValue(prop.name)"
                [readonly]="!!prop.readOnly"
                [size]="Size.XSmall"
                (ngModelChange)="updateProperty(prop.name, $event)"
              />
            }

            @case ('number') {
              <nui-textbox
                type="number"
                [ngModel]="getPropertyValue(prop.name)"
                [readonly]="!!prop.readOnly"
                [size]="Size.XSmall"
                (ngModelChange)="updateProperty(prop.name, +$event)"
              />
            }

            @case ('boolean') {
              <nui-checkbox
                [ngModel]="getPropertyValue(prop.name)"
                [readonly]="!!prop.readOnly"
                [size]="Size.XSmall"
                [label]="getPropertyValue(prop.name) ? 'Enabled' : 'Disabled'"
                (ngModelChange)="updateProperty(prop.name, $event)"
              />
            }

            @case ('enum') {
              <nui-select
                [options]="prop.options || []"
                bindLabel="label"
                bindValue="value"
                [ngModel]="getPropertyValue(prop.name)"
                [disabled]="!!prop.readOnly"
                [size]="Size.XSmall"
                [clearable]="false"
                (ngModelChange)="updateProperty(prop.name, $event)"
              />
            }

            @case ('array') {
              <div class="properties-panel__array-info">
                <span class="properties-panel__icon">üìã</span>
                <span class="properties-panel__array-text">
                  {{ $any(getPropertyValue(prop.name))?.length || 0 }} items
                </span>
              </div>
            }

            @case ('contentProjection') {
              <div class="properties-panel__content-projection">
                <span class="properties-panel__icon">‚ÑπÔ∏è</span>
                <span class="properties-panel__content-hint">
                  {{ prop.contentProjectionHint || 'This property uses content projection. Check usage examples.' }}
                </span>
              </div>
            }
          }
        </div>
      }
    }
  </div>
</div>
