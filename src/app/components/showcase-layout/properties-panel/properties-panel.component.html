<div class="properties-panel">
  <!-- Header -->
  <div class="properties-panel__header">
    <h3 class="properties-panel__title">Properties</h3>
    <button class="properties-panel__reset" (click)="resetProperties()" type="button">Reset</button>
  </div>

  <!-- Properties List -->
  <div class="properties-panel__list">
    @if (visibleProperties().length === 0) {
      <div class="properties-panel__empty">No properties available</div>
    } @else {
      @for (prop of visibleProperties(); track prop.name) {
        <div class="properties-panel__property">
          <label class="properties-panel__label">
            {{ prop.label }}
            @if (prop.readOnly) {
              <span class="properties-panel__badge">(Read-only)</span>
            }
            @if (prop.description) {
              <span class="properties-panel__hint">{{ prop.description }}</span>
            }
          </label>

          @switch (prop.type) {
            @case ('string') {
              <input
                type="text"
                class="properties-panel__input"
                [value]="getPropertyValue(prop.name)"
                [readonly]="prop.readOnly"
                (input)="updateProperty(prop.name, $any($event.target).value)"
              />
            }

            @case ('number') {
              <input
                type="number"
                class="properties-panel__input"
                [value]="getPropertyValue(prop.name)"
                [readonly]="prop.readOnly"
                (input)="updateProperty(prop.name, +$any($event.target).value)"
              />
            }

            @case ('boolean') {
              <label class="properties-panel__checkbox-wrapper">
                <input
                  type="checkbox"
                  class="properties-panel__checkbox"
                  [checked]="getPropertyValue(prop.name)"
                  [disabled]="prop.readOnly"
                  (change)="updateProperty(prop.name, $any($event.target).checked)"
                />
                <span class="properties-panel__checkbox-label">
                  {{ getPropertyValue(prop.name) ? 'Enabled' : 'Disabled' }}
                </span>
              </label>
            }

            @case ('enum') {
              <select
                class="properties-panel__select"
                [value]="getPropertyValue(prop.name)"
                [disabled]="prop.readOnly"
                (change)="updateProperty(prop.name, $any($event.target).value)"
              >
                @for (option of prop.options; track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                }
              </select>
            }

            @case ('array') {
              <div class="properties-panel__array-info">
                <span class="properties-panel__icon">üìã</span>
                <span class="properties-panel__array-text"> {{ getPropertyValue(prop.name)?.length || 0 }} items </span>
              </div>
            }

            @case ('contentProjection') {
              <div class="properties-panel__content-projection">
                <span class="properties-panel__icon">‚ÑπÔ∏è</span>
                <span class="properties-panel__content-hint">
                  {{ prop.contentProjectionHint || 'This property uses content projection. Check usage examples.' }}
                </span>
              </div>
            }
          }
        </div>
      }
    }
  </div>
</div>
