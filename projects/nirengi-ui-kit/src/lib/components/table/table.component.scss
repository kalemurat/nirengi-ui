/* Table SCSS */
.nui-table-container {
  @apply flex max-h-full w-full flex-col overflow-hidden rounded-lg border border-default bg-primary shadow-sm; /* Increased container border visibility */
}

.nui-table-toolbar {
  @apply flex justify-end border-b border-subtle p-4;

  &__search-container {
    @apply relative w-64;
  }

  &__search-input {
    @apply w-full rounded-md border border-default bg-primary px-3 py-2 text-sm text-primary transition-colors placeholder:text-tertiary focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:cursor-not-allowed disabled:bg-tertiary disabled:text-disabled;
  }
}

.nui-table-wrapper {
  @apply relative min-h-0 w-full flex-1 overflow-auto bg-primary;
}

.nui-table {
  @apply relative min-w-full border-collapse text-left text-sm text-primary;

  /* Universal Cell Styles (Default Medium) */
  th,
  td {
    @apply border-0 px-4 py-3 text-left align-middle text-sm text-primary;
  }

  &__head {
    @apply sticky top-0 z-10 bg-tertiary text-xs font-semibold uppercase text-secondary shadow-sm backdrop-blur-sm;

    th {
      @apply whitespace-nowrap font-medium;
    }
  }

  &__header-content {
    @apply flex flex-col gap-2;
  }

  &__header-title {
    @apply block truncate;
  }

  &__filter-input {
    @apply w-full rounded border border-default bg-primary px-2 py-1.5 text-xs font-normal text-primary transition-colors focus:border-primary-500 focus:outline-none;
  }

  &__body {
    @apply bg-primary;
  }

  &__row {
    @apply transition-colors duration-150;

    &:hover {
      @apply bg-tertiary;
    }

    &--head {
      @apply h-auto py-2;
    }
  }

  &__cell {
    /* Legacy/Direct usage support */
    @apply max-w-[200px] truncate whitespace-nowrap text-primary;
  }

  &__empty-cell {
    @apply p-12 text-center text-secondary;
  }

  &__empty-content {
    @apply flex flex-col items-center gap-3;
  }

  &__empty-title {
    @apply text-lg font-medium text-primary;
  }

  &__empty-text {
    @apply text-sm;
  }

  /* Size Variants */
  &--xs {
    th,
    td {
      @apply px-2 py-1 text-xs;
    }
  }

  &--sm {
    th,
    td {
      @apply px-3 py-2 text-sm;
    }
  }

  &--md {
    th,
    td {
      @apply px-4 py-3 text-sm;
    }
  }

  &--lg {
    th,
    td {
      @apply px-5 py-4 text-base;
    }
  }

  &--xl {
    th,
    td {
      @apply px-6 py-5 text-lg;
    }
  }

  /* Grid Variants - Stronger Borders & Generic Targeting */
  /* Grid Variants - Explicit Targeting */
  &--grid-none {
    .nui-table__body {
      @apply divide-none;
    }
    th,
    td {
      @apply border-none;
    }
    .nui-table__head th {
      @apply border-b-0;
    }
  }

  &--grid-horizontal {
    .nui-table__body {
      @apply divide-y divide-gray-300 dark:divide-gray-600;
    }
    /* Explicit Header Bottom Border - High Contrast */
    .nui-table__head th {
      @apply border-b border-default;
    }
  }

  &--grid-vertical {
    /* Vertical Lines for Body (Standard) */
    td {
      @apply border-r border-default;
      &:last-child {
        @apply border-r-0;
      }
    }
    /* Header Vertical Lines & Bottom - High Contrast */
    .nui-table__head th {
      @apply border-b border-r border-default;
      &:last-child {
        @apply border-r-0;
      }
    }
  }

  &--grid-both {
    .nui-table__body {
      @apply divide-y divide-gray-300 dark:divide-gray-600;
    }
    /* Vertical Lines Body */
    td {
      @apply border-r border-default;
      &:last-child {
        @apply border-r-0;
      }
    }
    /* Header Vertical Lines & Bottom - High Contrast */
    .nui-table__head th {
      @apply border-b border-r border-default;
      &:last-child {
        @apply border-r-0;
      }
    }
  }
}

/* Loading Overlay */
.nui-table-loading {
  @apply absolute inset-0 z-50 flex items-center justify-center backdrop-blur-sm transition-all duration-300;
  background-color: color-mix(in srgb, var(--bg-primary), transparent 50%);

  &__spinner {
    @apply h-8 w-8 animate-spin text-primary-600;
  }
}

/* Pagination */
.nui-table-pagination {
  @apply z-20 flex shrink-0 flex-col items-center justify-between border-t border-subtle bg-primary px-4 py-3 sm:flex-row;

  &__info {
    @apply mb-4 flex w-full items-center justify-between text-sm text-secondary sm:mb-0 sm:w-auto;
  }

  &__controls {
    @apply flex items-center gap-4;
  }

  &__size-select {
    @apply block w-full cursor-pointer rounded-md border-0 py-1.5 pl-3 pr-8 text-primary ring-1 ring-inset ring-subtle focus:ring-2 focus:ring-primary-600 disabled:cursor-not-allowed disabled:opacity-50 sm:text-sm sm:leading-6;
  }

  &__nav {
    @apply isolate inline-flex items-center gap-1 rounded-md;
  }

  &__btn {
    @apply relative inline-flex items-center justify-center rounded-full text-tertiary hover:bg-tertiary focus:z-20 focus:outline-offset-0 disabled:cursor-not-allowed disabled:opacity-50;

    &--number {
      @apply mx-0.5 font-semibold transition-colors;
    }

    &--active {
      @apply bg-primary-600 text-white hover:bg-primary-500;
    }

    &--inactive {
      @apply text-primary hover:bg-tertiary;
    }
  }

  &__ellipsis {
    @apply relative inline-flex items-center px-4 py-2 text-sm font-semibold text-secondary focus:outline-offset-0;
  }
}

/* Virtual Scroll Specifics */
cdk-virtual-scroll-viewport {
  height: 100%;
  width: 100%;

  table {
    width: 100%;
    table-layout: fixed;
  }
}
